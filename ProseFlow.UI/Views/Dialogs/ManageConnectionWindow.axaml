<shadui:Window x:Class="ProseFlow.UI.Views.Dialogs.ManageConnectionWindow"
               xmlns="https://github.com/avaloniaui"
               xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
               xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
               xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
               xmlns:vm="using:ProseFlow.UI.ViewModels.Dialogs"
               xmlns:shadui="clr-namespace:ShadUI;assembly=ShadUI"
               mc:Ignorable="d" d:DesignWidth="500" d:DesignHeight="400"
               x:DataType="vm:ManageConnectionViewModel"
               Title="Manage Workspace Connection"
               SizeToContent="Height" Width="550"
               WindowStartupLocation="CenterOwner" CanResize="False" ShowInTaskbar="False"
               Closing="OnClosing">
    <Panel Margin="24">
        <StackPanel Spacing="16" Width="450">
            <TextBlock Text="Choose how ProseFlow stores your Actions and Provider settings." TextWrapping="Wrap" />

            <RadioButton GroupName="ConnectionMode" Content="Use Local Data (Default)"
                         IsChecked="{Binding SelectedMode, Converter={x:Static shadui:BasicConverters.EnumToBoolConverter}, ConverterParameter={x:Static vm:ConnectionMode.Local}}"
                         IsEnabled="{Binding !IsConnected}" />
            <TextBlock Classes="Small Muted" Margin="28,0,0,0" Text="Stored privately in your user profile." />

            <RadioButton GroupName="ConnectionMode" Content="Use a Shared Workspace"
                         IsChecked="{Binding SelectedMode, Converter={x:Static shadui:BasicConverters.EnumToBoolConverter}, ConverterParameter={x:Static vm:ConnectionMode.Shared}}"
                         IsEnabled="{Binding !IsConnected}" />
            <TextBlock Classes="Small Muted" Margin="28,0,0,0"
                       Text="Sync with a central folder on a network or cloud drive." />

            <Grid ColumnDefinitions="*, Auto" ColumnSpacing="8" Margin="28,0,0,0"
                  IsEnabled="{Binding SelectedMode, Converter={x:Static ObjectConverters.Equal}, ConverterParameter={x:Static vm:ConnectionMode.Shared}}">
                <TextBox Grid.Column="0" Text="{Binding WorkspacePath}" Watermark="Path to shared folder..."
                         IsEnabled="{Binding !IsConnected}" />
                <Button Grid.Column="1" Classes="Outline" Content="Browse..." Command="{Binding BrowseCommand}"
                        IsEnabled="{Binding !IsConnected}" />
            </Grid>

            <Separator />

            <TextBlock Text="{Binding StatusMessage}" Classes="Small" TextWrapping="Wrap" MinHeight="30" />

            <DockPanel>
                <Button DockPanel.Dock="Left" Classes="Destructive Outline" Content="Disconnect"
                        IsVisible="{Binding IsConnected}"
                        Command="{Binding DisconnectCommand}" CommandParameter="{Binding $parent[Window]}" />

                <StackPanel DockPanel.Dock="Right" Orientation="Horizontal" Spacing="8" HorizontalAlignment="Right">
                    <Button Classes="Primary" Content="Apply" IsEnabled="{Binding !IsConnected}"
                            Command="{Binding ApplyCommand}" CommandParameter="{Binding $parent[Window]}" />
                    <Button Classes="Outline" Content="Cancel" IsCancel="True"
                            Command="{Binding CancelCommand}" CommandParameter="{Binding $parent[Window]}" />
                </StackPanel>
            </DockPanel>
        </StackPanel>
    </Panel>
</shadui:Window>